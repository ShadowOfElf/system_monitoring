# Платформа мониторинга производительности

## Общее описание

Добро пожаловать в проект System Monitor Daemon  — простой, но мощный сервис для мониторинга системных метрик.
Эта программа реализует демон (сервис), который собирает и предоставляет информацию о состоянии системы, такую как использование процессора, памяти, дискового пространства и сетевой активности.

______

## Функциональные особенности

* Сбор ключевых метрик:
  - Загрузка CPU
  - Использование дисков
  - Статистика сетевых интерфейсов
  - Общая нагрузка
* Возможность расширения поддержки дополнительных метрик
* Предоставляет API для получения данных (GRPC)

## Технические особенности
* Версии используемые при разработке
  - Go: go1.23.4
  - golangci-lint: 1.62.2
* Юнит-тесты покрывают все ключевые алгоритмы запускаются с помощью `make test`
* Интеграция с CI/CD: автоматическая проверка кода через `make lint`, а так же автоматическое тестирование
* Проект содержит `docker-compose` для проверки запуска сборки на ubuntu 

## Сборка проекта

Проект содержит следующие команды для сборки 
- `make build`: сборка проекта для Apple Silicon
- `make build-linux`: сборка проекта под линукс системы (совместимых с образом докера)
- `make run`: используемый для разработки запуск с передачей стандартного конфигурационного файла
- `make build-img`: создание билда для `docker-compose` содержащего систему под тестирование
- `make run-img`: запуск билда для `docker-compose` 
- `make generate`: генерация протобаф пакетов для работы GRPC
- `make test`: тестирование проекта

## CI/CD Pipeline
* Автоматический запуск golangci-lint с конфигурацией 
* Прогон юнит-тестов (go test -race)

## Server (Monitoring)  
Основной компонент, собирающий системную статистику и предоставляющий её через gRPC API.

version - предоставляет информацию о сборке и релизе
--config - указание пути к конфигурационному файлу для работы служб

Примеры использования:
```
./server --version
./server --config=./configs/app.yaml
```

___
### Описание конфигурационного файла мониторинга
* раздел [app]
  - max_size - максимальный размер хранилища снимков системы (Snapshot)
  - repeat_rate - частота создания снимков системы (Snapshot)
* раздел [logger]
  - level - уровень предупреждений (доступно DEBUG, INFO, WARN, ERROR)
* раздел [grpc]
  - host - прослушиваемый хост GRPC (для корректной сетевой работы указывается '')
  - port - прослушиваемый порт GRPC (по умолчанию 50051)
* раздел [collector]
  - load - разрешение запуска сборщика нагрузки
  - cpu - разрешение запуска сборщика CPU
  - disk - разрешение запуска сборщика заполненности разделов диска
  - net - - разрешение запуска сборщика нагрузки сети
___

## CLI Client
Содержит код клиента выводящего информацию, полученную от мониторинга, по GRPC в виде таблицы

version - предоставляет информацию о сборке и релизе
--config - указание пути к конфигурационному файлу для работы служб
--frequency - частота запроса статистики
--period - период за который запрашивается статистика

Примеры использования:
```
./server --version
./server --config=./configs/app.yaml
./client --frequency=10 --period=60 --config=./configs/client.yaml
```

___
### Описание конфигурационного файла клиента
* раздел [logger]
  - level - уровень предупреждений (доступно DEBUG, INFO, WARN, ERROR)
* раздел [grpc]
  - host - прослушиваемый хост GRPC (для корректной сетевой работы указывается '')
  - port - прослушиваемый порт GRPC (по умолчанию 50051)
___

пример вывода табличной информации:
| Load  |   CPU   | Disk | Net |
|-------|---------|------|-----|
| 15.16 |  4.00   |      |     |


## Описание gRPC API
В GRPC сервисе доступен функционал автоматического получения endpoints (Server Reflection)
в данный момент реализованы следующие endpoints:
  - GetStatisticProto принимает параметр интервала за который будет предоставлена статистика (усредненная)
    пример:
    ```json
    {
        "statsInterval": "10"
    }
    ```
    
## GitHub Badges & Code Quality 

Мы следим за качеством кода и прозрачностью проекта: 

___
Спасибо за использование и развитие проекта! ❤️


[![Go Version](https://img.shields.io/badge/go-%3E%3D1.23-blue.svg )](https://go.dev/dl/ ) 
